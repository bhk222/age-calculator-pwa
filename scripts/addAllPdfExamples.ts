import { readFileSync, writeFileSync } from 'fs';
import { join } from 'path';

console.log('üîß AJOUT DE TOUS LES EXEMPLES DE COMBINAISONS DU PDF\n');

// Exemples extraits du PDF (pages 24-32)
const combinationExamples = [
  // CHAUSSURE 701 - Exemples
  {
    reference: "701.EX.01",
    nom: "701 x 02 - Pieds plats avec valgus arri√®re-pied",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 en paire pour pieds plats avec valgus ou varus de l'arri√®re-pied apr√®s √©chec d'une correction avec semelle orthop√©dique",
    combinaison: "701 x 02",
    indications: ["Pieds plats avec valgus de l'arri√®re-pied apr√®s √©chec semelle", "Pieds plats avec varus de l'arri√®re-pied apr√®s √©chec semelle"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.02",
    nom: "701 x 02 + AS52 x 02 - Pieds plats valgus avant-pied",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 en paire avec contrefort bilat√©ral (AS52) pour pieds plats avec valgus de l'avant-pied",
    combinaison: "701 x 02 + AS52 x 02",
    indications: ["Pieds plats avec valgus de l'avant-pied"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.03",
    nom: "701 x 02 + AS51 x 02 - Metatarsus varus",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 en paire avec contrefort unilat√©ral (AS51) pour metatarsus varus",
    combinaison: "701 x 02 + AS51 x 02",
    indications: ["Metatarsus varus de l'avant-pied"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.04",
    nom: "701 + AS47 + 709 - H√©mipl√©gie unilat√©rale",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec bride en T anti-varus/valgus (AS47) c√¥t√© atteint et chaussure de compl√©ment (709) c√¥t√© sain pour atteinte neurologique unilat√©rale",
    combinaison: "701 + AS47 + 709",
    indications: ["H√©mipl√©gie gauche ou droite", "Atteinte neurologique centrale ou p√©riph√©rique unilat√©rale", "Pieds tombants unilat√©ral", "Steppage unilat√©ral"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.05",
    nom: "701 x 02 + AS47 x 02 - Dipl√©gie/Steppage bilat√©ral",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 en paire avec bride en T (AS47) bilat√©rale pour atteinte neurologique bilat√©rale",
    combinaison: "701 x 02 + AS47 x 02",
    indications: ["Dipl√©gie", "Pieds tombants bilat√©raux", "Steppage bilat√©ral", "Atteinte neurologique p√©riph√©rique bilat√©rale"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.06",
    nom: "701 + AP22 - Steppage avec instabilit√© cheville",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec baleinage bilat√©ral et tracteurs releveurs √©lastiques (AP22) pour steppage avec instabilit√© de cheville",
    combinaison: "701 + AP22",
    indications: ["Atteinte neurologique avec instabilit√© de cheville", "Pieds tombants avec instabilit√© cheville", "Steppage avec instabilit√© articulaire"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.07",
    nom: "701 + AS51 + 709 - PBVE unilat√©ral op√©r√©",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec contrefort unilat√©ral (AS51) pour PBVE op√©r√© c√¥t√© atteint et chaussure compl√©ment (709) c√¥t√© sain",
    combinaison: "701 + AS51 + 709",
    indications: ["Pied Bot Varus √âquin (PBVE) unilat√©ral op√©r√©", "PBVE unilat√©ral non op√©r√© avec acquisition marche"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.08",
    nom: "701 x 02 + AS51 x 02 - PBVE bilat√©ral op√©r√©",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 en paire avec contrefort unilat√©ral bilat√©ral (AS51) pour PBVE bilat√©ral op√©r√© (chaussure forme retourn√©e)",
    combinaison: "701 x 02 + AS51 x 02",
    indications: ["Pied Bot Varus √âquin (PBVE) bilat√©ral op√©r√©", "PBVE bilat√©ral avec acquisition de la marche"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.09",
    nom: "701 + AS50 - Instabilit√© cheville post-traumatique",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec baleinage bilat√©ral et capitonnage (AS50) pour instabilit√© importante de cheville",
    combinaison: "701 + AS50",
    indications: ["Instabilit√© importante de cheville post-traumatique", "S√©quelles neurologiques avec instabilit√© cheville"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.10",
    nom: "701 + AR31 + 709 - In√©galit√© MI 3-6cm",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec orth√®se int√©rieure 2-6cm (AR31) c√¥t√© court et chaussure compl√©ment (709) c√¥t√© normal pour in√©galit√© membre inf√©rieur de 3 √† 6 cm",
    combinaison: "701 + AR31 + 709",
    indications: ["In√©galit√© d'un membre inf√©rieur de 3 √† 6 cm confirm√©e √† la t√©l√©m√©trie"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.11",
    nom: "701 + AR31 + AR32 + 709 - In√©galit√© MI >6cm",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec orth√®se int√©rieure 2-6cm (AR31) + raccourcissement >6cm (AR32) c√¥t√© court et chaussure compl√©ment (709) c√¥t√© normal pour in√©galit√© membre inf√©rieur sup√©rieure √† 6 cm",
    combinaison: "701 + AR31 + AR32 + 709",
    indications: ["In√©galit√© d'un membre inf√©rieur sup√©rieure √† 6 cm confirm√©e √† la t√©l√©m√©trie"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.12",
    nom: "701 + MO91 + 01 + 709 - Amputation trans-m√©tatarsienne",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec moulage pied/mall√©oles (MO91) + ortho-proth√®se m√©tatarsienne (01) c√¥t√© amput√© et chaussure compl√©ment (709) c√¥t√© sain",
    combinaison: "701 + MO91 + 01 + 709",
    indications: ["Amputation de l'avant-pied trans-m√©tatarsienne (Lisfranc)"],
    type: "Grand appareillage"
  },
  {
    reference: "701.EX.13",
    nom: "701 + AD14/15/16 + 703 - √âquinisme irr√©ductible",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 701 avec orth√®se correction tige montante 8-14cm (AD14) ou 14-18cm (AD15) ou >18cm (AD16) c√¥t√© √©quin et chaussure compensation (703) c√¥t√© sain pour √©quinisme irr√©ductible unilat√©ral",
    combinaison: "701 + AD14 ou AD15 ou AD16 + 703",
    indications: ["√âquinisme irr√©ductible unilat√©ral selon hauteur (8-14cm, 14-18cm, >18cm)"],
    type: "Grand appareillage"
  },

  // CHAUSSURE 702 - Exemples
  {
    reference: "702.EX.01",
    nom: "702 + AD14/15/16 + 704 - √âquinisme pied fragilis√©",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure 702 (peausserie fine) avec orth√®se correction tige montante (AD14/15/16) c√¥t√© √©quin et chaussure compensation (704) c√¥t√© sain pour √©quinisme irr√©ductible unilat√©ral sur pied fragilis√©",
    combinaison: "702 + AD14 ou AD15 ou AD16 + 704",
    indications: ["√âquinisme irr√©ductible unilat√©ral sur pied fragilis√© (diab√©tique, polyarthrite, br√ªlure)"],
    type: "Grand appareillage"
  },

  // CHAUSSURE 705 - Exemples
  {
    reference: "705.EX.01",
    nom: "705 x 02 + AS47 x 02 - Dipl√©gie avec GAM",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure √† tourillon 705 en paire avec bride en T (AS47) bilat√©rale pour recevoir un Grand Appareil de Marche (GAM) en cas de dipl√©gie",
    combinaison: "705 x 02 + AS47 x 02",
    indications: ["Dipl√©gie polio n√©cessitant GAM", "Spina-bifida n√©cessitant GAM", "D√©formations axiales complexes du pied n√©cessitant GAM"],
    type: "Grand appareillage"
  },
  {
    reference: "705.EX.02",
    nom: "705 + AR31 + 709 - GAM avec in√©galit√© MI",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussure √† tourillon 705 avec compensation 2-6cm (AR31) c√¥t√© court pour GAM et chaussure compl√©ment (709) c√¥t√© sain",
    combinaison: "705 + AR31 + 709",
    indications: ["GAM ou PAM avec in√©galit√© membre inf√©rieur 3-6cm"],
    type: "Grand appareillage"
  },

  // CHAUSSURE 721/722 - Exemples
  {
    reference: "721.EX.01",
    nom: "721 + 709 + MO91 + 02 - Amputation Chopart",
    categorie: "Podo-orth√®ses - Exemples combinaisons",
    description: "Chaussette montante 721 avec moulage (MO91) + ortho-proth√®se Chopart (02) c√¥t√© amput√© et chaussure compl√©ment (709) c√¥t√© sain pour amputation tarsienne",
    combinaison: "721 + 709 + MO91 + 02",
    indications: ["Amputation tarsom√©tatarsienne type CHOPART", "Amputation m√©tatarsienne type LISFRANC"],
    type: "Grand appareillage"
  },

  // Exemples ADJONCTIONS sp√©cifiques
  {
    reference: "AD.EX.01",
    nom: "AD11 - D√©formations orteils",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Orth√®se pour d√©formations irr√©ductibles des orteils : hallux valgus de 35¬∞ ou orteils en griffe",
    combinaison: "AD11",
    indications: ["Hallux valgus ‚â• 35¬∞", "Orteils en griffe irr√©ductibles"],
    type: "Grand appareillage"
  },
  {
    reference: "AD.EX.02",
    nom: "AD12 - Amputation orteil",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Orth√®se pour trouble complexe suite √† amputation d'un orteil",
    combinaison: "AD12",
    indications: ["Amputation d'un ou plusieurs orteils"],
    type: "Grand appareillage"
  },
  {
    reference: "AD.EX.03",
    nom: "AD13 - Cas complexe d√©formations graves",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Orth√®se compensant et enveloppant des d√©formations graves irr√©ductibles ou partiellement r√©ductibles",
    combinaison: "AD13",
    indications: ["D√©formations graves irr√©ductibles du pied", "D√©formations partiellement r√©ductibles complexes"],
    type: "Grand appareillage"
  },
  {
    reference: "MO.EX.01",
    nom: "MO91 - Moulage pied/mall√©oles",
    categorie: "Podo-orth√®ses - Moulages",
    description: "Moulage du pied enveloppant les mall√©oles et le pilon tibial pour cas complexes n√©cessitant un moulage pr√©cis",
    combinaison: "MO91",
    indications: ["D√©formations complexes inv√©t√©r√©es n√©cessitant moulage", "Amputations n√©cessitant moulage", "Pieds fragilis√©s n√©cessitant moulage"],
    type: "Grand appareillage"
  },
  {
    reference: "MO.EX.02",
    nom: "MO92 - Moulage pied/jambe",
    categorie: "Podo-orth√®ses - Moulages",
    description: "Moulage du pied et de la jambe jusqu'aux plateaux tibiaux pour cas tr√®s complexes",
    combinaison: "MO92",
    indications: ["D√©formations tr√®s complexes n√©cessitant moulage √©tendu", "Atteintes neurologiques s√©v√®res"],
    type: "Grand appareillage"
  },
  {
    reference: "AS.EX.01",
    nom: "AS47 - Bride en T releveur",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Bride en T anti-varus ou anti-valgus ou releveurs √©lastiques sans baleinage pour correction d√©viation axiale",
    combinaison: "AS47",
    indications: ["D√©viation en varus du pied", "D√©viation en valgus du pied", "Pied tombant l√©ger sans instabilit√© cheville"],
    type: "Grand appareillage"
  },
  {
    reference: "AS.EX.02",
    nom: "AP22 - Baleinage + tracteurs releveurs",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Adjonction pour chaussure de paralysie : baleinage bilat√©ral et tracteurs releveurs en sangles √©lastiques fix√©s sur la claque",
    combinaison: "AP22",
    indications: ["Pied tombant avec instabilit√© de cheville", "Paralysie avec steppage et instabilit√©"],
    type: "Grand appareillage"
  },
  {
    reference: "AR.EX.01",
    nom: "AR31 - Compensation 2-6cm",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Orth√®se int√©rieure avec ou sans faux-bout de 2 √† 6 cm de raccourcissement pour compenser in√©galit√© membre inf√©rieur",
    combinaison: "AR31",
    indications: ["In√©galit√© membre inf√©rieur de 2 √† 6 cm"],
    type: "Grand appareillage"
  },
  {
    reference: "AR.EX.02",
    nom: "AR32 - Compensation >6cm",
    categorie: "Podo-orth√®ses - Adjonctions",
    description: "Raccourcissement au-dessus de 6 cm pour compenser in√©galit√© importante membre inf√©rieur (utilis√© avec AR31)",
    combinaison: "AR32",
    indications: ["In√©galit√© membre inf√©rieur sup√©rieure √† 6 cm (avec AR31)"],
    type: "Grand appareillage"
  },
  {
    reference: "709.EX.01",
    nom: "709 - Chaussure compl√©ment c√¥t√© sain",
    categorie: "Podo-orth√®ses - Compl√©ments",
    description: "Chaussure de compl√©ment du c√¥t√© sain √† vis√©e esth√©tique pour √©quilibrer avec le c√¥t√© atteint portant chaussure orthop√©dique",
    combinaison: "709",
    indications: ["Compl√©ment esth√©tique c√¥t√© sain en cas d'appareillage unilat√©ral", "H√©mipl√©gie", "In√©galit√© membre inf√©rieur", "Amputation unilat√©rale"],
    type: "Grand appareillage"
  }
];

console.log(`‚úÖ ${combinationExamples.length} exemples de combinaisons extraits du PDF\n`);

// Lire le fichier actuel
const dbPath = join(process.cwd(), 'data', 'appareillage.ts');
let dbContent = readFileSync(dbPath, 'utf-8');

// Trouver la fin du tableau
const arrayEndMatch = dbContent.lastIndexOf('];');
if (arrayEndMatch === -1) {
  console.error('‚ùå Impossible de trouver la fin du tableau');
  process.exit(1);
}

// Ins√©rer les exemples avant la fin du tableau
const beforeEnd = dbContent.substring(0, arrayEndMatch);
const afterEnd = dbContent.substring(arrayEndMatch);

const examplesCode = combinationExamples.map(ex => `  {
    reference: "${ex.reference}",
    nom: "${ex.nom}",
    categorie: "${ex.categorie}",
    description: "${ex.description}",
    ${ex.combinaison ? `combinaison: "${ex.combinaison}",` : ''}
    indications: [${ex.indications.map(i => `"${i}"`).join(', ')}],
    type: "${ex.type}",
    remboursement: "100%",
    references_composees: ["${ex.reference}"]
  }`).join(',\n');

const newContent = beforeEnd + ',\n  // ========== EXEMPLES DE COMBINAISONS DU PDF (CHAPITRE 2) ==========\n' + examplesCode + '\n' + afterEnd;

// Sauvegarder
writeFileSync(dbPath, newContent, 'utf-8');

console.log(`‚úÖ ${combinationExamples.length} exemples de combinaisons ajout√©s √† appareillage.ts`);
console.log(`üì¶ TOTAL: ${97 + combinationExamples.length} produits + exemples\n`);
console.log(`üéâ TERMIN√â ! Tous les exemples de combinaisons du PDF sont maintenant dans la base !`);
